æŒ‰ç…§æ–‡æœ¬æ¯è¡ŒåŒ¹é…æ–‡ä»¶å¤åˆ¶åˆ°æŒ‡å®šä½ç½®

## ğŸ§© åŠŸèƒ½ç®€ä»‹

ä»æŒ‡å®šçš„ TXT æ–‡ä»¶ï¼ˆ`txt_file`ï¼‰ä¸­è¯»å–è‹¥å¹²å…³é”®å­—ï¼ˆå»é‡å¹¶æŒ‰å­—å…¸åºæ’åºï¼‰ã€‚  
åœ¨ç»™å®šçš„æºç›®å½•ï¼ˆ`source_dir`ï¼‰åŠå…¶å­ç›®å½•ä¸­ï¼ŒæŸ¥æ‰¾æ–‡ä»¶å**åŒ…å«è¯¥å…³é”®å­—çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶**ã€‚  

ç¨‹åºä¼šå°†åŒ¹é…æ–‡ä»¶**ç§»åŠ¨**åˆ°ç›®æ ‡ç›®å½•ï¼ˆ`target_dir`ï¼‰ï¼Œå¹¶åœ¨é‡åˆ°é‡åæ–‡ä»¶æ—¶è‡ªåŠ¨æ·»åŠ åç¼€ `_1`, `_2`â€¦ ä»¥é¿å…è¦†ç›–ã€‚  

æ‰§è¡Œè¿‡ç¨‹ä¸­ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºæ¯ä¸ªå…³é”®å­—çš„åŒ¹é…ä¸ç§»åŠ¨ç»“æœï¼Œå¹¶æœ€ç»ˆæ±‡æ€»ç»Ÿè®¡ä¿¡æ¯ã€‚

---

## ğŸ“‚ ç¤ºä¾‹ç›®å½•ç»“æ„

```
H:\
â”œâ”€ data
â”‚   â”œâ”€ report1.txt
â”‚   â”œâ”€ image_fail.png
â”‚   â””â”€ sub
â”‚       â””â”€ test_error.log
â”œâ”€ list.txt
â””â”€ copy    ï¼ˆåˆå§‹ä¸ºç©ºï¼‰
```

`list.txt` å†…å®¹å¦‚ä¸‹ï¼š

```
report
fail
missing
error
```

---

## ğŸ’» è¿è¡Œæ•ˆæœ

### æ§åˆ¶å°è¾“å‡º

```
âœ” å·²ç§»åŠ¨: 'report1.txt' å¯¹åº”å…³é”®å­— 'report' åˆ° 'H:\copy\report1.txt'
âœ” å·²ç§»åŠ¨: 'image_fail.png' å¯¹åº”å…³é”®å­— 'fail' åˆ° 'H:\copy\image_fail.png'
âš  æœªæ‰¾åˆ°åŒ¹é…æ–‡ä»¶ for key: 'missing'
âœ” å·²ç§»åŠ¨: 'test_error.log' å¯¹åº”å…³é”®å­— 'error' åˆ° 'H:\copy\test_error.log'

å…± 4 ä¸ªå…³é”®å­—ï¼ŒæˆåŠŸç§»åŠ¨ 3 ä¸ªï¼Œå¯¹åº”æ–‡ä»¶ã€‚æœªç§»åŠ¨ 1 ä¸ªã€‚
```

### æ‰§è¡Œåç›®å½•ç»“æ„

```
H:\
â”œâ”€ data
â”‚   â””â”€ sub
â”‚       â””â”€               ï¼ˆåŸ test_error.log å·²ç§»åŠ¨ï¼‰
â”œâ”€ copy
â”‚   â”œâ”€ report1.txt
â”‚   â”œâ”€ image_fail.png
â”‚   â””â”€ test_error.log
â”œâ”€ list.txt
```

---

## ğŸ§  å®ç°ä»£ç 

```python
import os
import shutil

def move_files_from_txt(txt_file, source_dir, target_dir):
    """
    æ ¹æ® TXT æ–‡ä»¶ä¸­çš„å…³é”®å­—åŒ¹é…å¹¶ç§»åŠ¨æ–‡ä»¶ã€‚
    ä»…ç§»åŠ¨æ–‡ä»¶åä¸­åŒ…å«ä»»æ„å…³é”®å­—çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚
    """

    # åˆ›å»ºç›®æ ‡ç›®å½•
    os.makedirs(target_dir, exist_ok=True)

    # è¯»å–å…³é”®å­—å¹¶å»é‡ã€æ’åº
    with open(txt_file, 'r', encoding='utf-8') as f:
        keys = sorted({line.strip() for line in f if line.strip()})

    moved_keys = set()

    # éå†å…³é”®å­—åŒ¹é…æ–‡ä»¶
    for key in keys:
        found = False
        for root, _, files in os.walk(source_dir):
            for fname in files:
                if key in fname:
                    src = os.path.join(root, fname)
                    dst = os.path.join(target_dir, fname)

                    # è‹¥é‡ååˆ™è‡ªåŠ¨åŠ åç¼€
                    if os.path.exists(dst):
                        base, ext = os.path.splitext(fname)
                        i = 1
                        while os.path.exists(os.path.join(target_dir, f"{base}_{i}{ext}")):
                            i += 1
                        dst = os.path.join(target_dir, f"{base}_{i}{ext}")

                    # æ‰§è¡Œç§»åŠ¨
                    shutil.move(src, dst)
                    print(f"âœ” å·²ç§»åŠ¨: '{fname}' å¯¹åº”å…³é”®å­— '{key}' åˆ° '{dst}'")
                    moved_keys.add(key)
                    found = True
                    break
            if found:
                break

        if not found:
            print(f"âš  æœªæ‰¾åˆ°åŒ¹é…æ–‡ä»¶ for key: '{key}'")


    # æ±‡æ€»ç»Ÿè®¡
    total = len(keys)
    success = len(moved_keys)
    print(f"\nå…± {total} ä¸ªå…³é”®å­—ï¼ŒæˆåŠŸç§»åŠ¨ {success} ä¸ªï¼Œå¯¹åº”æ–‡ä»¶ã€‚æœªç§»åŠ¨ {total - success} ä¸ªã€‚")


if __name__ == '__main__':
    txt_file = r"H:\list.txt"
    source_directory = r"H:\data"
    target_directory = r"H:\copy"

    move_files_from_txt(txt_file, source_directory, target_directory)
```

---

## ğŸ§¾ è¾“å‡ºç»Ÿè®¡è¯´æ˜

| é¡¹ç›® | å«ä¹‰ |
|------|------|
| âœ” å·²ç§»åŠ¨ | åŒ¹é…æˆåŠŸå¹¶å®Œæˆç§»åŠ¨ |
| âš  æœªæ‰¾åˆ° | è¯¥å…³é”®å­—æœªåŒ¹é…åˆ°ä»»ä½•æ–‡ä»¶ |
| æ±‡æ€»ç»Ÿè®¡ | æ€»å…³é”®å­—æ•°ã€æˆåŠŸæ•°ã€å¤±è´¥æ•° |

---

## ğŸ”’ æ³¨æ„äº‹é¡¹

- ä»…åŒ¹é…**æ–‡ä»¶ååŒ…å«å…³é”®å­—**çš„ç¬¬ä¸€ä¸ªæ–‡ä»¶ã€‚
- è‹¥å¸Œæœ› **ä¸åŒºåˆ†å¤§å°å†™**ï¼Œå¯å°†åˆ¤æ–­ä¿®æ”¹ä¸ºï¼š
  ```python
  if key.lower() in fname.lower():
  ```
- è‹¥å¸Œæœ›**å¤åˆ¶è€Œéç§»åŠ¨**ï¼Œå¯å°†ï¼š
  ```python
  shutil.move(src, dst)
  ```
  æ”¹ä¸ºï¼š
  ```python
  shutil.copy2(src, dst)
  ```

---

## ğŸ§­ æ€»ç»“

è¯¥è„šæœ¬éå¸¸é€‚åˆä»¥ä¸‹åœºæ™¯ï¼š

- æŒ‰å…³é”®å­—æ‰¹é‡æå–æ–‡ä»¶ï¼ˆå¦‚æ—¥å¿—ã€æŠ¥å‘Šã€æˆªå›¾ï¼‰ã€‚
- è‡ªåŠ¨å½’æ¡£ã€æ•´ç†ã€è¿ç§»å·¥ä½œç›®å½•ä¸­çš„æ•£ä¹±æ–‡ä»¶ã€‚
- æŒ‰ä»»åŠ¡æˆ–ä¸»é¢˜å…³é”®è¯ç­›é€‰æ–‡ä»¶ã€‚

---